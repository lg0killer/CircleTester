# Use the latest 2.1 version of CircleCI pipeline process engine. See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

jobs:
  checkouttest:
    docker: 
      - image: circleci/python:3.8
      
    steps:
      - checkout
      - add_ssh_keys:
           fingerprints:
              - "0b:d6:fe:7e:5d:8e:3f:a8:a4:75:9f:67:7b:0e:b4:f5"
      - run:
          name: checkout
          command: |
            git clone https://github.com/lg0killer/HomeServer.git ../stuffs
            ls
            ls ../
          
  
  simplewebsite:
    docker:
      - image: yeasy/simple-web:latest
     
    steps:
      - run: echo "Hi Mom!"
  
  curltest:
    docker:
      - image: ubuntu
      - image: yeasy/simple-web:latest

    steps:
      - run:
          name: Curl
          command: |
            apt update
            apt install -y curl
            curl http://localhost:80

# Orchestrate or schedule a set of jobs
workflows:
  # Name the workflow "welcome"
  welcome:
    # Run the welcome/run job in its own container
    jobs:
      - checkouttest
      - simplewebsite
      - curltest:
          requires:
            - simplewebsite
